# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the main branch
  push:
    branches: [ main ]
    tag: v*.*.*
  pull_request:
    branches: [ main ]
    tags: v*.*.*

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  - name: Get current date
    id: date
    run: echo "::set-output name=date::$(date +'%Y-%m-%d')"
    
  - name: Test with environment variables
    run: echo $TAG_NAME - $RELEASE_NAME
    env:
      TAG_NAME: nightly-tag-${{ steps.date.outputs.date }}
      RELEASE_NAME: nightly-release-${{ steps.date.outputs.date }}

  - name: Test with input
    uses: actions/hello-world-docker-action@master
    with:
      who-to-greet: Mona-the-Octocat-${{ steps.date.outputs.date }}
